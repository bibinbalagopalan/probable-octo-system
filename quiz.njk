---
layout: layout.njk
permalink: /quiz/index.html
---

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Chapter Quiz | Jeevadhara</title>
        <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300;400;500;700&display=swap" rel="stylesheet">
        <style>
            /* COPY ALL THE CSS FROM YOUR quiz.html FILE HERE */
            /* Remove the sponsor modal styles but keep everything else */
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }
            :root {
                --primary-accent: #fcd800;
                --secondary-accent: #6ab0ff;
                --text-light: #f0f0f0;
                --text-muted: #aaa;
                --content-dark: rgba(30, 30, 46, 0.8);
                --highlight-blue: rgba(106, 176, 255, 0.1);
                --highlight-yellow: rgba(252, 216, 0, 0.1);
                --correct-color: #4CAF50;
                --incorrect-color: #F44336;
            }
            body {
                font-family: 'Ubuntu', sans-serif;
                background: linear-gradient(135deg, #0a0a1a 0%, #000 100%);
                color: var(--text-light);
                line-height: 1.7;
                min-height: 100vh;
            }
            .container {
                max-width: 900px;
                margin: 0 auto;
                padding: 40px 20px;
            }
            header {
                text-align: center;
                margin-bottom: 50px;
                padding-bottom: 30px;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }
            /* Chapter Info */
            .chapter-info {
                margin-bottom: 30px;
                text-align: center;
            }
            .chapter-name {
                font-size: 1.8rem;
                font-weight: 600;
                color: var(--primary-accent);
                margin-bottom: 10px;
            }
            .back-to-course {
                display: inline-block;
                color: var(--secondary-accent);
                text-decoration: none;
                font-weight: 500;
                transition: color 0.3s;
                margin-bottom: 20px;
            }
            .back-to-course:hover {
                color: #a8d2ff;
            }
            /* Sponsor Section (KEEP THIS) */
            .sponsor-section {
                background: var(--content-dark);
                border-radius: 12px;
                padding: 25px;
                margin-bottom: 30px;
                text-align: center;
                border-left: 4px solid var(--primary-accent);
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            }
            .sponsor-title {
                font-size: 1.2rem;
                color: var(--text-muted);
                margin-bottom: 15px;
                text-transform: uppercase;
                letter-spacing: 1px;
            }
            .sponsor-content {
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 20px;
                flex-wrap: wrap;
            }
            .sponsor-logo {
                max-width: 150px;
                max-height: 70px;
                object-fit: contain;
                border-radius: 8px;
            }
            .sponsor-text {
                max-width: 500px;
                text-align: left;
            }
            .sponsor-name {
                font-weight: 600;
                color: var(--primary-accent);
                margin-bottom: 8px;
                font-size: 1.4rem;
            }
            /* Main Heading */
            h1 {
                font-size: 2.8rem;
                font-weight: 700;
                color: var(--secondary-accent);
                margin-bottom: 20px;
                line-height: 1.3;
            }
            /* Quiz Content Styles - KEEP ALL YOUR EXISTING QUIZ STYLES */
            .quiz-intro {
                font-size: 1.3rem;
                color: var(--text-muted);
                font-weight: 400;
                max-width: 700px;
                margin: 0 auto;
                background: var(--content-dark);
                padding: 20px;
                border-radius: 10px;
                border-left: 4px solid var(--primary-accent);
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            }
            main.content-area {
                background: var(--content-dark);
                border-radius: 12px;
                padding: 40px;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
                margin-bottom: 30px;
            }
            /* Quiz Navigation */
            .quiz-nav {
                display: flex;
                justify-content: space-between;
                margin-top: 30px;
                padding-top: 20px;
                border-top: 1px solid rgba(255, 255, 255, 0.1);
            }
            .nav-btn {
                padding: 12px 25px;
                background: var(--primary-accent);
                color: #000;
                text-decoration: none;
                border-radius: 6px;
                font-weight: 500;
                transition: all 0.3s ease;
                border: none;
                cursor: pointer;
                font-family: 'Ubuntu', sans-serif;
                font-size: 1rem;
            }
            .nav-btn:hover {
                background: #ffe64d;
                transform: translateY(-2px);
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            }
            .nav-btn.outline {
                background: transparent;
                color: var(--primary-accent);
                border: 2px solid var(--primary-accent);
            }
            .nav-btn.outline:hover {
                background: var(--primary-accent);
                color: #000;
            }
            .nav-btn:disabled {
                opacity: 0.5;
                cursor: not-allowed;
            }
            .nav-btn:disabled:hover {
                transform: none;
                box-shadow: none;
                background: var(--primary-accent);
            }
            /* Quiz Content */
            .quiz-container {
                position: relative;
            }
            .question-container {
                margin-bottom: 40px;
            }
            .question-number {
                font-size: 1.2rem;
                color: var(--text-muted);
                margin-bottom: 10px;
            }
            .question-text {
                font-size: 1.4rem;
                font-weight: 500;
                margin-bottom: 25px;
                color: var(--text-light);
            }
            .options-container {
                display: flex;
                flex-direction: column;
                gap: 15px;
            }
            .option {
                background: rgba(255, 255, 255, 0.05);
                border: 2px solid rgba(255, 255, 255, 0.1);
                border-radius: 8px;
                padding: 15px 20px;
                cursor: pointer;
                transition: all 0.2s ease;
                display: flex;
                align-items: center;
            }
            .option:hover {
                background: rgba(255, 255, 255, 0.1);
                border-color: rgba(255, 255, 255, 0.2);
            }
            .option.selected {
                border-color: var(--secondary-accent);
                background: var(--highlight-blue);
            }
            .option.correct {
                border-color: var(--correct-color);
                background: rgba(76, 175, 80, 0.1);
            }
            .option.incorrect {
                border-color: var(--incorrect-color);
                background: rgba(244, 67, 54, 0.1);
            }
            .option-label {
                display: inline-block;
                width: 30px;
                height: 30px;
                border-radius: 50%;
                background: rgba(255, 255, 255, 0.1);
                text-align: center;
                line-height: 30px;
                margin-right: 15px;
                font-weight: 500;
            }
            .option-text {
                flex: 1;
            }
            /* Feedback Section */
            .feedback-container {
                margin-top: 30px;
                padding: 20px;
                border-radius: 8px;
                background: var(--highlight-blue);
                border-left: 4px solid var(--secondary-accent);
                display: none;
            }
            .feedback-container.show {
                display: block;
                animation: fadeIn 0.5s ease;
            }
            .feedback-title {
                font-weight: 600;
                margin-bottom: 10px;
                color: var(--secondary-accent);
            }
            .feedback-text {
                margin-bottom: 15px;
            }
            .explanation {
                background: rgba(0, 0, 0, 0.2);
                padding: 15px;
                border-radius: 6px;
                margin-top: 10px;
            }
            /* Progress Bar */
            .progress-container {
                margin-bottom: 30px;
            }
            .progress-bar {
                height: 8px;
                background: rgba(255, 255, 255, 0.1);
                border-radius: 4px;
                overflow: hidden;
            }
            .progress-fill {
                height: 100%;
                background: var(--primary-accent);
                width: 0;
                transition: width 0.3s ease;
            }
            .progress-text {
                display: flex;
                justify-content: space-between;
                margin-top: 10px;
                font-size: 0.9rem;
                color: var(--text-muted);
            }
            /* Results Screen */
            .results-container {
                text-align: center;
                padding: 40px 20px;
                display: none;
            }
            .results-container.show {
                display: block;
                animation: fadeIn 0.5s ease;
            }
            .score-circle {
                width: 150px;
                height: 150px;
                border-radius: 50%;
                background: var(--content-dark);
                margin: 0 auto 30px;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                border: 5px solid var(--primary-accent);
                box-shadow: 0 0 20px rgba(252, 216, 0, 0.3);
            }
            .score-percentage {
                font-size: 2.5rem;
                font-weight: 700;
                color: var(--primary-accent);
            }
            .score-text {
                font-size: 1rem;
                color: var(--text-muted);
            }
            .results-details {
                display: flex;
                justify-content: center;
                gap: 30px;
                margin: 30px 0;
            }
            .result-item {
                background: var(--content-dark);
                padding: 20px;
                border-radius: 8px;
                min-width: 150px;
            }
            .result-value {
                font-size: 2rem;
                font-weight: 700;
                color: var(--secondary-accent);
            }
            .result-label {
                font-size: 0.9rem;
                color: var(--text-muted);
                margin-top: 5px;
            }
            .action-buttons {
                display: flex;
                justify-content: center;
                gap: 15px;
                margin-top: 30px;
            }
            /* Animations */
            @keyframes fadeIn {
                from {
                    opacity: 0;
                }
                to {
                    opacity: 1;
                }
            }
            /* Responsive */
            @media(max-width: 768px) {
                .container {
                    padding: 20px 15px;
                }
                h1 {
                    font-size: 2.2rem;
                }
                .chapter-name {
                    font-size: 1.5rem;
                }
                .quiz-intro {
                    font-size: 1.1rem;
                    padding: 15px;
                }
                main.content-area {
                    padding: 25px;
                }
                .quiz-nav {
                    flex-direction: column;
                    gap: 15px;
                }
                .nav-btn {
                    width: 100%;
                    text-align: center;
                }
                .results-details {
                    flex-direction: column;
                    align-items: center;
                }
                .sponsor-content {
                    flex-direction: column;
                    text-align: center;
                }
                .sponsor-text {
                    text-align: center;
                }
            }
            /* REMOVE SPONSOR MODAL STYLES COMPLETELY */
        </style>
    </head>
    <body>
        <div class="container">
            <div id="quiz-container" class="quiz-container">
                <header>
                    <div class="chapter-info">
                        <div class="chapter-name" id="chapter-name">Loading Chapter...</div>
                        <a href="#" id="back-to-course" class="back-to-course">‚Üê Back to Course</a>
                    </div>
                    <!-- Sponsor Section (KEEP THIS) -->
                    <div class="sponsor-section" id="sponsor-section">
                        <div class="sponsor-title">Sponsored By</div>
                        <div class="sponsor-content">
                            <img id="sponsor-logo" class="sponsor-logo" src="/assets/sponsor-edutech.png" alt="Sponsor Logo">
                            <div class="sponsor-text">
                                <div class="sponsor-name" id="sponsor-name">EduTech Solutions</div>
                            </div>
                        </div>
                    </div>
                </header>
                <main class="content-area" role="main">
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill"></div>
                        </div>
                        <div class="progress-text">
                            <span id="current-question">Question 1</span>
                            <span id="total-questions">of 10</span>
                        </div>
                    </div>
                    <div class="question-container">
                        <div class="question-number" id="question-number">Question 1</div>
                        <div class="question-text" id="question-text"></div>
                        <div
                            class="options-container" id="options-container"><!-- Options will be dynamically inserted here -->
                        </div>
                        <div class="feedback-container" id="feedback-container">
                            <div class="feedback-title" id="feedback-title"></div>
                            <div class="feedback-text" id="feedback-text"></div>
                            <div class="explanation" id="explanation"></div>
                        </div>
                    </div>
                    <div class="quiz-nav">
                        <button id="prev-btn" class="nav-btn outline" disabled>Previous</button>
                        <button id="next-btn" class="nav-btn">Next Question</button>
                    </div>
                </main>
                <div class="results-container" id="results-container">
                    <div class="score-circle">
                        <div class="score-percentage" id="score-percentage">0%</div>
                        <div class="score-text">Your Score</div>
                    </div>
                    <h2>Quiz Complete!</h2>
                    <p>You've finished the quiz. Review your results below.</p>
                    <div class="results-details">
                        <div class="result-item">
                            <div class="result-value" id="correct-answers">0</div>
                            <div class="result-label">Correct Answers</div>
                        </div>
                        <div class="result-item">
                            <div class="result-value" id="total-questions-result">0</div>
                            <div class="result-label">Total Questions</div>
                        </div>
                        <div class="result-item">
                            <div class="result-value" id="percentage-score">0%</div>
                            <div class="result-label">Percentage</div>
                        </div>
                    </div>
                    <div class="action-buttons">
                        <button id="restart-btn" class="nav-btn">Restart Quiz</button>
                        <a href="#" id="back-to-course-result" class="nav-btn outline">Back to Course</a>
                    </div>
                </div>
            </div>
        </div>
        <!-- REMOVED SPONSOR MODAL COMPLETELY -->
        <script>
            // Simplified Sponsor Data (just for header)
            const sponsors = [
                {
                    name: "EduTech Solutions",
                    logo: "/assets/sponsor-edutech.png"
                }, {
                    name: "Global Learning Foundation",
                    logo: "/assets/sponsor-global-learning.png"
                }
            ];
            // Quiz state variables
            let currentQuestionIndex = 0;
            let userAnswers = [];
            let score = 0;
            let quizCompleted = false;
            let currentCourse = "";
            let currentSubject = "";
            let currentChapter = "";
            let quizQuestions = [];
            // DOM elements
            const chapterNameElement = document.getElementById('chapter-name');
            const questionNumberElement = document.getElementById('question-number');
            const questionTextElement = document.getElementById('question-text');
            const optionsContainer = document.getElementById('options-container');
            const feedbackContainer = document.getElementById('feedback-container');
            const feedbackTitle = document.getElementById('feedback-title');
            const feedbackText = document.getElementById('feedback-text');
            const explanationElement = document.getElementById('explanation');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const progressFill = document.getElementById('progress-fill');
            const currentQuestionElement = document.getElementById('current-question');
            const totalQuestionsElement = document.getElementById('total-questions');
            const resultsContainer = document.getElementById('results-container');
            const scorePercentageElement = document.getElementById('score-percentage');
            const correctAnswersElement = document.getElementById('correct-answers');
            const totalQuestionsResultElement = document.getElementById('total-questions-result');
            const percentageScoreElement = document.getElementById('percentage-score');
            const restartBtn = document.getElementById('restart-btn');
            const backToCourseLink = document.getElementById('back-to-course');
            const backToCourseResult = document.getElementById('back-to-course-result');
            // Format chapter name for display
            function formatChapterName(chapterSlug) {
                return chapterSlug
                    .split('-')
                    .map(word => word.charAt(0).toUpperCase() + word.slice(1))
                    .join(' ');
            }
            // Display random sponsor in header
            function displayRandomSponsor() {
                const randomIndex = Math.floor(Math.random() * sponsors.length);
                const sponsor = sponsors[randomIndex];
                document.getElementById('sponsor-logo').src = sponsor.logo;
                document.getElementById('sponsor-name').textContent = sponsor.name;
            }
            // Load questions from JSON file
            async function loadQuizQuestions() {
                if (! currentCourse || ! currentSubject || ! currentChapter) {
                    throw new Error('Missing URL parameters. Check if course, subject, and chapter are passed in URL.');
                }
                const jsonPath = `/quizzes/${currentCourse}/${currentSubject}.json`;
                console.log('üîç Loading questions from:', jsonPath);
                console.log('üìù URL Parameters:', {currentCourse, currentSubject, currentChapter});
                try {
                    const response = await fetch(jsonPath);
                    console.log('üì° Response status:', response.status, response.statusText);
                    if (! response.ok) {
                        throw new Error(`Failed to load quiz file: ${
                            response.status
                        } ${
                            response.statusText
                        }`);
                    }
                    const quizData = await response.json();
                    console.log('üì¶ Loaded quiz data keys:', Object.keys(quizData));
                    console.log('üîé Looking for chapter:', currentChapter);
                    console.log('üìã Available chapters:', Object.keys(quizData));
                    // Get questions for the specific chapter
                    quizQuestions = quizData[currentChapter] || [];
                    console.log(`‚úÖ Found ${
                        quizQuestions.length
                    } questions for chapter: ${currentChapter}`);
                    if (quizQuestions.length === 0) {
                        throw new Error(`No questions found for chapter "${currentChapter}". Available chapters: ${
                            Object.keys(quizData).join(', ')
                        }`);
                    }
                } catch (error) {
                    console.error('‚ùå Error in loadQuizQuestions:', error);
                    throw error;
                }
            }
            // Load a question
            function loadQuestion(index) {
                const question = quizQuestions[index];
                questionNumberElement.textContent = `Question ${
                    index + 1
                }`;
                currentQuestionElement.textContent = `Question ${
                    index + 1
                }`;
                questionTextElement.textContent = question.question;
                // Clear previous options
                optionsContainer.innerHTML = '';
                // Add new options
                question.options.forEach((option, optionIndex) => {
                    const optionElement = document.createElement('div');
                    optionElement.className = 'option';
                    if (userAnswers[index] === optionIndex) {
                        optionElement.classList.add('selected');
                    }
                    optionElement.innerHTML = `
            <span class="option-label">${
                        String.fromCharCode(65 + optionIndex)
                    }</span>
            <span class="option-text">${option}</span>
        `;
                    optionElement.addEventListener('click', () => selectOption(optionIndex));
                    optionsContainer.appendChild(optionElement);
                });
                // Update navigation buttons
                prevBtn.disabled = index === 0;
                if (index === quizQuestions.length - 1) {
                    nextBtn.textContent = 'Finish Quiz';
                } else {
                    nextBtn.textContent = 'Next Question';
                }
                // Hide feedback if moving to a new question
                if (userAnswers[index] === null) {
                    feedbackContainer.classList.remove('show');
                } else {
                    showFeedback(index);
                }
            }
            // Select an option
            function selectOption(optionIndex) {
                if (userAnswers[currentQuestionIndex] !== null && quizCompleted) 
                    return;
                
                const options = document.querySelectorAll('.option');
                options.forEach(option => option.classList.remove('selected'));
                options[optionIndex].classList.add('selected');
                userAnswers[currentQuestionIndex] = optionIndex;
                showFeedback(currentQuestionIndex);
                nextBtn.disabled = false;
            }
            // Show feedback for a question
            function showFeedback(index) {
                const question = quizQuestions[index];
                const userAnswer = userAnswers[index];
                const isCorrect = userAnswer === question.correctAnswer;
                const options = document.querySelectorAll('.option');
                options.forEach((option, optionIndex) => {
                    if (optionIndex === question.correctAnswer) {
                        option.classList.add('correct');
                    } else if (optionIndex === userAnswer && ! isCorrect) {
                        option.classList.add('incorrect');
                    }
                });
                feedbackTitle.textContent = isCorrect
                    ? 'Correct!'
                    : 'Incorrect';
                feedbackText.textContent = isCorrect
                    ? 'You selected the correct answer.'
                    : `The correct answer is: ${
                        question.options[question.correctAnswer]
                    }`;
                explanationElement.textContent = question.explanation;
                feedbackContainer.classList.add('show');
            }
            // Navigate to next question
            function nextQuestion() {
                if (currentQuestionIndex < quizQuestions.length - 1) {
                    currentQuestionIndex++;
                    loadQuestion(currentQuestionIndex);
                    updateProgress();
                } else {
                    finishQuiz();
                }
            }
            // Navigate to previous question
            function prevQuestion() {
                if (currentQuestionIndex > 0) {
                    currentQuestionIndex--;
                    loadQuestion(currentQuestionIndex);
                    updateProgress();
                }
            }
            // Update progress bar
            function updateProgress() {
                const progress = ((currentQuestionIndex + 1) / quizQuestions.length) * 100;
                progressFill.style.width = `${progress}%`;
            }
            // Finish the quiz and show results
            function finishQuiz() {
                score = 0;
                userAnswers.forEach((answer, index) => {
                    if (answer === quizQuestions[index].correctAnswer) {
                        score++;
                    }
                });
                const percentage = Math.round((score / quizQuestions.length) * 100);
                scorePercentageElement.textContent = `${percentage}%`;
                correctAnswersElement.textContent = score;
                percentageScoreElement.textContent = `${percentage}%`;
                document
                    .querySelector('main')
                    .style
                    .display = 'none';
                resultsContainer.classList.add('show');
                quizCompleted = true;
            }
            // Restart the quiz
            function restartQuiz() {
                currentQuestionIndex = 0;
                userAnswers = Array(quizQuestions.length).fill(null);
                score = 0;
                quizCompleted = false;
                document
                    .querySelector('main')
                    .style
                    .display = 'block';
                resultsContainer.classList.remove('show');
                feedbackContainer.classList.remove('show');
                loadQuestion(currentQuestionIndex);
                updateProgress();
            }
            // Initialize the quiz
            async function initQuiz() {
                // Display random sponsor in header
                displayRandomSponsor();
                // Get parameters from URL
                const urlParams = new URLSearchParams(window.location.search);
                currentCourse = urlParams.get('course') || '';
                currentSubject = urlParams.get('subject') || '';
                currentChapter = urlParams.get('chapter') || '';
                console.log('üéØ Quiz params:', {currentCourse, currentSubject, currentChapter});
                // Set back links
                const courseUrl = currentCourse
                    ? `/courses/${currentCourse}/`
                    : '/';
                backToCourseLink.href = courseUrl;
                backToCourseResult.href = courseUrl;
                try {
                    // Load questions from JSON file
                    await loadQuizQuestions();
                    // Set chapter name
                    chapterNameElement.textContent = formatChapterName(currentChapter);
                    // Initialize user answers array
                    userAnswers = Array(quizQuestions.length).fill(null);
                    // Update UI
                    totalQuestionsElement.textContent = `of ${
                        quizQuestions.length
                    }`;
                    totalQuestionsResultElement.textContent = quizQuestions.length;
                    loadQuestion(currentQuestionIndex);
                    updateProgress();
                } catch (error) {
                    console.error('‚ùå Error loading quiz:', error);
                    chapterNameElement.textContent = 'Error Loading Quiz';
                    questionTextElement.textContent = `Error: ${
                        error.message
                    }`;
                    nextBtn.disabled = true;
                    // Show error in results container
                    document
                        .querySelector('main')
                        .style
                        .display = 'none';
                    resultsContainer.innerHTML = `
            <h2>Quiz Not Available</h2>
            <p>${
                        error.message
                    }</p>
            <p>Check browser console for details.</p>
            <div class="action-buttons">
                <a href="${courseUrl}" class="nav-btn">Back to Course</a>
            </div>
        `;
                    resultsContainer.classList.add('show');
                }
            }
            // Event listeners
            prevBtn.addEventListener('click', prevQuestion);
            nextBtn.addEventListener('click', nextQuestion);
            restartBtn.addEventListener('click', restartQuiz);
            // Initialize the quiz when the page loads
            document.addEventListener('DOMContentLoaded', function () {
                console.log('üöÄ Quiz page loaded, initializing...');
                initQuiz();
            });
        </script>
    </body>
</html>